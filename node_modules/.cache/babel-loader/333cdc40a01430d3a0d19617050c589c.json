{"ast":null,"code":"var _jsxFileName = \"/Users/Lew/react/react-video-looper/src/index.js\",\n    _this4 = this;\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteralLoose([\"  \\n    text-align: center;\\n    width: 100%;\\n    z-index:2;\\n    div {\\n        color: grey;\\n        display: inline-block;\\n        text-align: left;\\n        font-size:5em;\\n        font-weight: 100;\\n    }\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    color: grey;\\n    font-size:1.4em;\\n    font-weight: 200;\\n    display: \", \";\\n    text-align: center;\\n    header {\\n        display: \", \";\\n        width: \", \";\\n    }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    position: absolute;\\n    bottom: 2em;\\n    right: \", \";\\n    width: \", \";\\n    font-family: \\\"Segoe UI\\\", Frutiger, \\\"Frutiger Linotype\\\", \\\"Dejavu Sans\\\", \\\"Helvetica Neue\\\", Arial, sans-serif;\\n    line-height:1;\\n    user-select: none;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    z-index:1;\\n    position: absolute;\\n    top: 50%;\\n    left: \", \";;\\n    transform: translate(-50%, -50%);\\n    border: 0;\\n    background: transparent;\\n    box-sizing: border-box;\\n    width: 0;\\n    height: 100px;\\n    border-color: transparent transparent transparent #d6d6d644;\\n    border-style: solid;\\n    border-width: 50px 0 50px 75px;\\n    opacity: \", \";\\n    transition: opacity 0.3s;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    position:  \", \";\\n    object-fit: \", \";\\n    object-position: \", \";\\n    width: \", \";\\n    height: 100%;\\n    left:0;\\n    opacity: \", \";\\n    &.videoClone {\\n        filter: \", \";\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  position: relative;\\n  top:0;\\n  width: \", \";\\n  height: \", \";\\n  overflow: hidden;\\n  background-color: black;\\n  cursor: pointer;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nvar VideoLooper = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(VideoLooper, _React$Component);\n\n  function VideoLooper(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"togglePlayback\", function (e) {\n      e && e.preventDefault();\n      var currentVideo = _this.state.isVideoCloneActive ? 'videoClone' : 'video';\n\n      if (_this[currentVideo].paused) {\n        _this[currentVideo].play();\n\n        _this._frameId = requestAnimationFrame(_this.tick);\n\n        _this.setState({\n          isPlaying: true\n        });\n      } else {\n        _this[currentVideo].pause();\n\n        cancelAnimationFrame(_this._frameId);\n\n        _this.setState({\n          isPlaying: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tick\", function () {\n      _this._frameId = requestAnimationFrame(_this.tick);\n      _this.state.isVideoCloneActive ? _this.checkLoopEnd(_this.videoClone, _this.video) : _this.checkLoopEnd(_this.video, _this.videoClone);\n\n      if (_this.props.isDebugMode) {\n        _this.setState({\n          currentTime: _this.state.isVideoCloneActive ? (Math.round(_this.videoClone.currentTime * 100) / 100).toFixed(2) : (Math.round(_this.video.currentTime * 100) / 100).toFixed(2)\n        });\n      }\n    });\n\n    _this.state = {\n      isVideoCloneActive: false,\n      currentLoop: 0,\n      isPlaying: false,\n      currentTime: 0\n    };\n    return _this;\n  }\n\n  var _proto = VideoLooper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.video.addEventListener('loadeddata', this.onLoadedVideo.bind(this));\n    this.videoClone.addEventListener('loadeddata', this.onLoadedVideoClone.bind(this));\n    this.video.addEventListener('ended', this.onEndedVideo.bind(this));\n    this.videoClone.addEventListener('ended', this.onEndedVideo.bind(this));\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var nextVideo = this.state.isVideoCloneActive ? 'video' : 'videoClone';\n\n    if (this.props.start !== prevProps.start && this.props.start < this.video.duration) {\n      this[nextVideo].currentTime = Number(this.props.start);\n    }\n\n    if (this.props.speed !== prevProps.speed) {\n      this.video.playbackRate = this.props.speed;\n      this.videoClone.playbackRate = this.props.speed;\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    cancelAnimationFrame(this._frameId);\n  };\n\n  _proto.onLoadedVideo = function onLoadedVideo() {\n    this.video.pause();\n    this.props.autoPlay && this.togglePlayback();\n    this.video.playbackRate = this.props.speed || 1;\n  };\n\n  _proto.onLoadedVideoClone = function onLoadedVideoClone() {\n    this.videoClone.pause();\n    this.videoClone.currentTime = this.props.start;\n    this.videoClone.playbackRate = this.props.speed || 1;\n  };\n\n  _proto.checkLoopEnd = function checkLoopEnd(currentVideo, nextVideo) {\n    var _this2 = this;\n\n    if (currentVideo.currentTime >= this.props.end && (!this.props.loopCount || this.state.currentLoop < this.props.loopCount)) {\n      nextVideo.play();\n      this.setState({\n        isVideoCloneActive: !this.state.isVideoCloneActive,\n        currentLoop: this.state.currentLoop + 1\n      }, function () {\n        currentVideo.pause();\n        setTimeout(function () {\n          currentVideo.currentTime = _this2.props.start;\n        }, 500);\n      });\n    }\n  };\n\n  _proto.onEndedVideo = function onEndedVideo() {\n    cancelAnimationFrame(this._frameId);\n    this.setState({\n      currentLoop: 0,\n      isPlaying: false\n    });\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    return /*#__PURE__*/React.createElement(VideoContainer, _extends({\n      onClick: this.togglePlayback\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(PlayButton, _extends({}, this.state, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Video, _extends({\n      ref: function ref(video) {\n        _this3.video = video;\n      },\n      isVisible: true\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"source\", {\n      src: this.props.source,\n      type: \"video/mp4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Video, _extends({\n      ref: function ref(videoClone) {\n        _this3.videoClone = videoClone;\n      },\n      className: \"videoClone\",\n      isVisible: this.state.isVideoCloneActive\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"source\", {\n      src: this.props.source,\n      type: \"video/mp4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    })), this.props.isDebugMode && /*#__PURE__*/React.createElement(Debug, {\n      isSplitView: this.props.isSplitView,\n      isVideoCloneActive: this.state.isVideoCloneActive,\n      currentTime: this.state.currentTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }));\n  };\n\n  return VideoLooper;\n}(React.Component);\n\n_defineProperty(VideoLooper, \"defaultProps\", {\n  speed: 1,\n  loopCount: null,\n  autoPlay: true,\n  muted: true,\n  isDebugMode: false,\n  isSplitView: false,\n  width: '100%',\n  height: '100vh',\n  objectFit: 'cover',\n  objectPosition: '40%'\n});\n\nexport { VideoLooper as default };\nVideoLooper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  source: PropTypes.string.isRequired,\n  start: PropTypes.number.isRequired,\n  end: PropTypes.number.isRequired,\n  speed: PropTypes.number,\n  loopCount: PropTypes.number,\n  autoPlay: PropTypes.bool,\n  muted: PropTypes.bool,\n  isDebugMode: PropTypes.bool,\n  isSplitView: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  objectFit: PropTypes.string,\n  objectPosition: PropTypes.string\n} : {};\n\nvar Debug = function Debug(props) {\n  return /*#__PURE__*/React.createElement(DebugContainer, {\n    isSplitView: props.isSplitView,\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DebugHeader, {\n    isVisible: !props.isSplitView,\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, props.isVideoCloneActive ? 'cloned video' : 'main video')), /*#__PURE__*/React.createElement(DebugHeader, {\n    isVisible: props.isSplitView,\n    isSplitView: props.isSplitView,\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"main video\"), /*#__PURE__*/React.createElement(\"header\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, \"cloned video\")), /*#__PURE__*/React.createElement(DebugData, {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, props.currentTime)));\n};\n\nvar VideoContainer = styled.div(_templateObject(), function (props) {\n  return props.width;\n}, function (props) {\n  return props.height;\n});\nvar Video = styled.video(_templateObject2(), function (props) {\n  return props.isDebugMode && props.isSplitView ? 'relative' : 'absolute';\n}, function (props) {\n  return props.objectFit;\n}, function (props) {\n  return props.objectPosition;\n}, function (props) {\n  return props.isDebugMode && props.isSplitView ? '50%' : '100%';\n}, function (props) {\n  return props.isVisible || props.isDebugMode && props.isSplitView ? 1 : 0;\n}, function (props) {\n  return props.isDebugMode && props.isSplitView ? 'grayscale(100%)' : 'none';\n});\nvar PlayButton = styled.div(_templateObject3(), function (props) {\n  return props.isDebugMode && props.isSplitView ? props.isVideoCloneActive ? '75%' : '25%' : '50%';\n}, function (props) {\n  return props.isPlaying ? 0 : 1;\n});\nvar DebugContainer = styled.div(_templateObject4(), function (props) {\n  return props.isSplitView ? '0' : '2em';\n}, function (props) {\n  return props.isSplitView ? '100%' : 'auto';\n});\nvar DebugHeader = styled.div(_templateObject5(), function (props) {\n  return props.isVisible ? 'block' : 'none';\n}, function (props) {\n  return props.isSplitView ? 'inline-block' : 'block';\n}, function (props) {\n  return props.isSplitView ? '50%' : '100%';\n});\nvar DebugData = styled.div(_templateObject6());","map":{"version":3,"sources":["C:/Users/ajink/Desktop/real-steel/node_modules/react-video-looper/es/index.js"],"names":["_jsxFileName","_this4","_templateObject6","data","_taggedTemplateLiteralLoose","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","strings","raw","slice","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","React","PropTypes","styled","VideoLooper","_React$Component","props","_this","e","preventDefault","currentVideo","state","isVideoCloneActive","paused","play","_frameId","requestAnimationFrame","tick","setState","isPlaying","pause","cancelAnimationFrame","checkLoopEnd","videoClone","video","isDebugMode","currentTime","Math","round","toFixed","currentLoop","_proto","componentDidMount","addEventListener","onLoadedVideo","bind","onLoadedVideoClone","onEndedVideo","componentDidUpdate","prevProps","nextVideo","start","duration","Number","speed","playbackRate","componentWillUnmount","autoPlay","togglePlayback","_this2","end","loopCount","setTimeout","render","_this3","createElement","VideoContainer","onClick","__self","__source","fileName","lineNumber","columnNumber","PlayButton","Video","ref","isVisible","src","type","className","Debug","isSplitView","Component","muted","width","height","objectFit","objectPosition","default","propTypes","process","env","NODE_ENV","string","isRequired","number","bool","DebugContainer","DebugHeader","DebugData","div"],"mappings":"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","sourcesContent":["var _jsxFileName = \"/Users/Lew/react/react-video-looper/src/index.js\",\n    _this4 = this;\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteralLoose([\"  \\n    text-align: center;\\n    width: 100%;\\n    z-index:2;\\n    div {\\n        color: grey;\\n        display: inline-block;\\n        text-align: left;\\n        font-size:5em;\\n        font-weight: 100;\\n    }\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    color: grey;\\n    font-size:1.4em;\\n    font-weight: 200;\\n    display: \", \";\\n    text-align: center;\\n    header {\\n        display: \", \";\\n        width: \", \";\\n    }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    position: absolute;\\n    bottom: 2em;\\n    right: \", \";\\n    width: \", \";\\n    font-family: \\\"Segoe UI\\\", Frutiger, \\\"Frutiger Linotype\\\", \\\"Dejavu Sans\\\", \\\"Helvetica Neue\\\", Arial, sans-serif;\\n    line-height:1;\\n    user-select: none;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    z-index:1;\\n    position: absolute;\\n    top: 50%;\\n    left: \", \";;\\n    transform: translate(-50%, -50%);\\n    border: 0;\\n    background: transparent;\\n    box-sizing: border-box;\\n    width: 0;\\n    height: 100px;\\n    border-color: transparent transparent transparent #d6d6d644;\\n    border-style: solid;\\n    border-width: 50px 0 50px 75px;\\n    opacity: \", \";\\n    transition: opacity 0.3s;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n    position:  \", \";\\n    object-fit: \", \";\\n    object-position: \", \";\\n    width: \", \";\\n    height: 100%;\\n    left:0;\\n    opacity: \", \";\\n    &.videoClone {\\n        filter: \", \";\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  position: relative;\\n  top:0;\\n  width: \", \";\\n  height: \", \";\\n  overflow: hidden;\\n  background-color: black;\\n  cursor: pointer;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteralLoose(strings, raw) { if (!raw) { raw = strings.slice(0); } strings.raw = raw; return strings; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nvar VideoLooper =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(VideoLooper, _React$Component);\n\n  function VideoLooper(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"togglePlayback\", function (e) {\n      e && e.preventDefault();\n      var currentVideo = _this.state.isVideoCloneActive ? 'videoClone' : 'video';\n\n      if (_this[currentVideo].paused) {\n        _this[currentVideo].play();\n\n        _this._frameId = requestAnimationFrame(_this.tick);\n\n        _this.setState({\n          isPlaying: true\n        });\n      } else {\n        _this[currentVideo].pause();\n\n        cancelAnimationFrame(_this._frameId);\n\n        _this.setState({\n          isPlaying: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tick\", function () {\n      _this._frameId = requestAnimationFrame(_this.tick);\n      _this.state.isVideoCloneActive ? _this.checkLoopEnd(_this.videoClone, _this.video) : _this.checkLoopEnd(_this.video, _this.videoClone);\n\n      if (_this.props.isDebugMode) {\n        _this.setState({\n          currentTime: _this.state.isVideoCloneActive ? (Math.round(_this.videoClone.currentTime * 100) / 100).toFixed(2) : (Math.round(_this.video.currentTime * 100) / 100).toFixed(2)\n        });\n      }\n    });\n\n    _this.state = {\n      isVideoCloneActive: false,\n      currentLoop: 0,\n      isPlaying: false,\n      currentTime: 0\n    };\n    return _this;\n  }\n\n  var _proto = VideoLooper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.video.addEventListener('loadeddata', this.onLoadedVideo.bind(this));\n    this.videoClone.addEventListener('loadeddata', this.onLoadedVideoClone.bind(this));\n    this.video.addEventListener('ended', this.onEndedVideo.bind(this));\n    this.videoClone.addEventListener('ended', this.onEndedVideo.bind(this));\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var nextVideo = this.state.isVideoCloneActive ? 'video' : 'videoClone';\n\n    if (this.props.start !== prevProps.start && this.props.start < this.video.duration) {\n      this[nextVideo].currentTime = Number(this.props.start);\n    }\n\n    if (this.props.speed !== prevProps.speed) {\n      this.video.playbackRate = this.props.speed;\n      this.videoClone.playbackRate = this.props.speed;\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    cancelAnimationFrame(this._frameId);\n  };\n\n  _proto.onLoadedVideo = function onLoadedVideo() {\n    this.video.pause();\n    this.props.autoPlay && this.togglePlayback();\n    this.video.playbackRate = this.props.speed || 1;\n  };\n\n  _proto.onLoadedVideoClone = function onLoadedVideoClone() {\n    this.videoClone.pause();\n    this.videoClone.currentTime = this.props.start;\n    this.videoClone.playbackRate = this.props.speed || 1;\n  };\n\n  _proto.checkLoopEnd = function checkLoopEnd(currentVideo, nextVideo) {\n    var _this2 = this;\n\n    if (currentVideo.currentTime >= this.props.end && (!this.props.loopCount || this.state.currentLoop < this.props.loopCount)) {\n      nextVideo.play();\n      this.setState({\n        isVideoCloneActive: !this.state.isVideoCloneActive,\n        currentLoop: this.state.currentLoop + 1\n      }, function () {\n        currentVideo.pause();\n        setTimeout(function () {\n          currentVideo.currentTime = _this2.props.start;\n        }, 500);\n      });\n    }\n  };\n\n  _proto.onEndedVideo = function onEndedVideo() {\n    cancelAnimationFrame(this._frameId);\n    this.setState({\n      currentLoop: 0,\n      isPlaying: false\n    });\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    return (\n      /*#__PURE__*/\n      React.createElement(VideoContainer, _extends({\n        onClick: this.togglePlayback\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(PlayButton, _extends({}, this.state, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(Video, _extends({\n        ref: function ref(video) {\n          _this3.video = video;\n        },\n        isVisible: true\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"source\", {\n        src: this.props.source,\n        type: \"video/mp4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(Video, _extends({\n        ref: function ref(videoClone) {\n          _this3.videoClone = videoClone;\n        },\n        className: \"videoClone\",\n        isVisible: this.state.isVideoCloneActive\n      }, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"source\", {\n        src: this.props.source,\n        type: \"video/mp4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }\n      })), this.props.isDebugMode &&\n      /*#__PURE__*/\n      React.createElement(Debug, {\n        isSplitView: this.props.isSplitView,\n        isVideoCloneActive: this.state.isVideoCloneActive,\n        currentTime: this.state.currentTime,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }))\n    );\n  };\n\n  return VideoLooper;\n}(React.Component);\n\n_defineProperty(VideoLooper, \"defaultProps\", {\n  speed: 1,\n  loopCount: null,\n  autoPlay: true,\n  muted: true,\n  isDebugMode: false,\n  isSplitView: false,\n  width: '100%',\n  height: '100vh',\n  objectFit: 'cover',\n  objectPosition: '40%'\n});\n\nexport { VideoLooper as default };\nVideoLooper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  source: PropTypes.string.isRequired,\n  start: PropTypes.number.isRequired,\n  end: PropTypes.number.isRequired,\n  speed: PropTypes.number,\n  loopCount: PropTypes.number,\n  autoPlay: PropTypes.bool,\n  muted: PropTypes.bool,\n  isDebugMode: PropTypes.bool,\n  isSplitView: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  objectFit: PropTypes.string,\n  objectPosition: PropTypes.string\n} : {};\n\nvar Debug = function Debug(props) {\n  return (\n    /*#__PURE__*/\n    React.createElement(DebugContainer, {\n      isSplitView: props.isSplitView,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(DebugHeader, {\n      isVisible: !props.isSplitView,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(\"header\", {\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, props.isVideoCloneActive ? 'cloned video' : 'main video')),\n    /*#__PURE__*/\n    React.createElement(DebugHeader, {\n      isVisible: props.isSplitView,\n      isSplitView: props.isSplitView,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(\"header\", {\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, \"main video\"),\n    /*#__PURE__*/\n    React.createElement(\"header\", {\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, \"cloned video\")),\n    /*#__PURE__*/\n    React.createElement(DebugData, {\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, props.currentTime)))\n  );\n};\n\nvar VideoContainer = styled.div(_templateObject(), function (props) {\n  return props.width;\n}, function (props) {\n  return props.height;\n});\nvar Video = styled.video(_templateObject2(), function (props) {\n  return props.isDebugMode && props.isSplitView ? 'relative' : 'absolute';\n}, function (props) {\n  return props.objectFit;\n}, function (props) {\n  return props.objectPosition;\n}, function (props) {\n  return props.isDebugMode && props.isSplitView ? '50%' : '100%';\n}, function (props) {\n  return props.isVisible || props.isDebugMode && props.isSplitView ? 1 : 0;\n}, function (props) {\n  return props.isDebugMode && props.isSplitView ? 'grayscale(100%)' : 'none';\n});\nvar PlayButton = styled.div(_templateObject3(), function (props) {\n  return props.isDebugMode && props.isSplitView ? props.isVideoCloneActive ? '75%' : '25%' : '50%';\n}, function (props) {\n  return props.isPlaying ? 0 : 1;\n});\nvar DebugContainer = styled.div(_templateObject4(), function (props) {\n  return props.isSplitView ? '0' : '2em';\n}, function (props) {\n  return props.isSplitView ? '100%' : 'auto';\n});\nvar DebugHeader = styled.div(_templateObject5(), function (props) {\n  return props.isVisible ? 'block' : 'none';\n}, function (props) {\n  return props.isSplitView ? 'inline-block' : 'block';\n}, function (props) {\n  return props.isSplitView ? '50%' : '100%';\n});\nvar DebugData = styled.div(_templateObject6());"]},"metadata":{},"sourceType":"module"}